
\section{小结与讨论}
\label{sec:centerlines_conclusions}

\subsection{小结}

本章中，我们对之前获得的血管表面模型进行了两方面的预处理工作――数据优化与中心线提取。
这两项工作相互独立，前者用于改善交互实验的性能，后者则主要为下一步的手术过程建模工作提供基础的血管几何信息。

在心血管介入手术仿真中，虚拟手术工具与虚拟血管模型之间的交互性能是仿真系统显示效果的一个重要指标。
用于构建血管模型的数据量是决定交互性能的主要因素之一。
在本章中，我们提出了一种精简血管模型数据的计算方法。
其基本思路是削减构成表面模型的多边形的数量，而不对表面模型的几何特征带来明显的破坏。
本章工作中用到的血管模型基于真实临床病例的CTA影像数据。

中心线是一个描述三维空间中物体特征的有用的概念。
在实现心血管介入手术仿真系统的工作中，心血管系统的中心线模型将为我们在仿真虚拟手术工作的路径规划和导航中提供血管集合形状的表征。
在本章中，我们设计了一种用于从基于CTA的心血管表面模型中提取中心线的方法。
所得出的血管模型的形状分析结果为后续精确的手术仿真奠定了基础。
首先，对构成表面模型的多边形的连接性进行检验，找出并除去与实际表面模型无关的冗余的多边形。
第二，对检验后表面模型上的不平整的区域进行了平滑处理，以消除它们对中心线计算的不利影响。
第三，对经过平滑处理的表面进行细分，以提高中心线计算的稳定性和计算结果的准确性。
最后，通过计算关于嵌入Voronoi图的到达时刻的Eikonal方程，获得表面模型的中心线。
实验部分记录了实验的设计和主要过程，展示了典型的结果，证明了所提出方法的有效性。

\subsection{讨论}

本章实验中用到的计算机程序都是利用C++实现的。
其中的一些计算方法的实现则模仿了VTK（Visualization Toolkit）\cite{Schroeder2000VTK}，它是一个开源软件库，其中包含科学可视化领域常用的计算设施和算法。

\subsubsection{面向交互实验的多边形精简}

在检验表面模型中相邻顶点的连接性的过程中，我们将所采用的算法设置为提取最大连接区域的模式。
为了抑制图像处理过程中所引入的噪声网格的影响，我们采用了一种表面平滑算法通过轻微地改变相关顶点的位置来除去这些网格。
平滑表面的算法具有两个关键的可设置参数，分别用于设置算法的带宽和迭代次数。
通过实验发现，平滑算法的迭代次数与平滑程度呈正相关关系，即：迭代次数越多，表面则越平滑。
另一方面，平滑算法的带宽与平滑程度则呈现出负相关关系，即：带宽越狭窄，表面越光滑。
需要指出的是，平滑算法在平整表面的同时，对表面的几何特征有轻微的破坏。

\begin{figure}[t]
\centering
\subfloat[]{\includegraphics[height=3.3in]{Figures/postprocessing/centerlines/surface.eps}%
\label{fig:centerlins_surface}}
\hfil
\subfloat[]{\includegraphics[height=3.4in]{Figures/postprocessing/centerlines/centerlines.eps}%
\label{fig:centerlins_centerlines_model}}
\caption[完整主动脉模型及其中心线]{完整主动脉表面模型及其中心线：(a) 基于CTA的表面模型（多边形数量：$757,538$）；(b) 表面模型的中心线。}%
\label{fig:centerlins_visualization}
\end{figure} 

在削减多边形面片的过程中，我们需要权衡的是：一方面，根据仿真交互系统的需要，我们需要尽可能多地精简模型的数据量；另一方面，过高的精简率会严重扭曲模型的原始几何特征，从而造成对模型的几何特征的严重破坏。
这在选择削减率参数的时候是需要考虑的。
在本章的实验中，我们测试了一系列设置不同精简率的情况，并且成功地确定了生成的结果可接受的精简率参数。
面片削减的输出是progressive网格\cite{Hoppe1996}。
除了前述对输入网格数量的削减，结果中的网格还很好地保持了模型的几何特征以及整体外观（法线，颜色等）。

在验证交互性能的过程中，我们通过大量实际测试发现，大于$10$的fps才足以保证本样机显示的流畅性。
在本章中，用于验证的主动脉区段表面模型（图\ref{fig:mesh_connectivity}）的多边形数量被削减了$90\%$（见第\ref{subsec:mesh_validation}节），在交互实验中达到了$18$fps（$> 10$）。
而由于完整血管表面模型中，张成表面的多边形数量巨大（图\ref{fig:centerlins_surface}），因此用于手术仿真研究的主动脉和冠状动脉的表面模型的多边形数量被削减$99\%$，才使得屏幕刷新率在交互实验中达到了$11$fps（$> 10$）。

\subsubsection{面向交互实验的多边形精简}

为抑制由非结构化的多边形表面，以及图像获取和处理过程中所引入的噪声所带来的不利影响，我们在提取血管模型的中心线之前进行了一系列的预处理工作。
在这一过程中，构成模型表面的多边形的连接性得到了梳理，模型的表面得到了平整。
为保证中心线计算过程的稳定性和提高中心线提取的准确性，又对平整后的模型表面进行了细分。
所有的处理都是在尽可能不破坏原始几何特征的前提下进行的。
需要特别指出的是，中心线提取的计算任务是一项极其占用计算机资源（时间和空间）的工作。
例如，为完成如图\ref{fig:centerlins_visualization}所示的计算工作，在专门对程序进行优化改进之后，我们仍然耗费了大约八个小时。